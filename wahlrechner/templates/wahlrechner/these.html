{% extends 'wahlrechner/base.html' %}
{% load wahlrechner_extras %}

{% block title %}These {{ pos }} von {{ max_pos }}{% endblock %}

{% block sidebar %}
    {% include "wahlrechner/sidebar.html" with icon_default="empty" url_template="these" %}
{% endblock %}

{% block content %}

    <div class="content lg:p-10">

        <div class="these counter">These {{ pos }} von {{ max_pos }}</div>
        <div class="these title">{{ aktuelle_these.these_text }}</div>

        {# Erhalte Position des Nutzers aus den URL Parametern #}
        {% with status=request.GET|get_param_value:aktuelle_these.pk %}

            <p class="these clue">
                {% if status and status != 's' %}
                    Du hast dich bereits zu dieser These positioniert, aber du kannst deine Antwort noch anpassen:
                {% elif status == 's' %}
                    Du hast diese These übersprungen, aber du kannst sie jetzt noch beantworten:
                {% else %}
                    Bitte positioniere dich zu dieser These:
                {% endif %}
            </p>

            <div class="these btn-container">

                <button onClick="location.href='{% url "these" %}?{{ payload_agree }}'"
                        class="btn btn-agree {% if status == "a" %}active{% endif %}">
                    {% include "snippets/icon.html" with icon="agree" color="white" %} stimme zu
                </button>

                <button onClick="location.href='{% url "these" %}?{{ payload_neutral }}'"
                        class="btn btn-neutral {% if status == "n" %}active{% endif %}">
                    {% include "snippets/icon.html" with icon="neutral" color="white" %} neutral
                </button>

                <button onClick="location.href='{% url "these" %}?{{ payload_disagree }}'"
                        class="btn btn-disagree {% if status == "d" %}active{% endif %}">
                    {% include "snippets/icon.html" with icon="disagree" color="white" %} stimme nicht zu
                </button>

            </div>

        {% endwith %}

    </div>

    <div class="btn-row">

        {% if payload_previous %}
            {% alias "vorherige These" as text %}
            {% include "snippets/btn.html" with text=text url="these" get=payload_previous icon="left" pos="l" %}
        {% elif not show_continue_button %}
            {# Leeres Div, um die restlichen Buttons korrekt anzuordnen #}
            <div class="-mb-2"></div>
        {% endif %}

        {% if show_continue_button %}
            {% alias "Abschließen" as text %}
            {% include "snippets/btn.html" with text=text url="confirm" get=current_payload icon="cright" pos="r" %}
        {% endif %}

        {% if these_beantwortet and payload_next %}
            {% alias "nächste These" as text %}
            {% include "snippets/btn.html" with text=text url="these" get=payload_next icon="right" pos="r" %}
        {% elif not these_beantwortet %}
            {% alias "These überspringen" as text %}
            {% include "snippets/btn.html" with text=text url="these" get=payload_skip icon="skip" pos="r" %}
        {% endif %}

    </div>

{% endblock %}
